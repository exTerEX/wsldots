#!/usr/bin/env bash

# Let script exit when a command fail.
set -o errexit

# Let script exit if an unset variable is used.
set -o nounset

# Update package list
sudo apt -y update

# Case-insensitive globbing
shopt -s nocaseglob

# Append to the Bash history file, rather than overwriting it
shopt -s histappend

# Autocorrect typos in path names when using `cd`
shopt -s cdspell

# Make symbolic links
for FILE in ~/.dotfiles/.{bashrc,bash_aliases}; do
    sudo ln -sf $FILE ~/
done
unset FILE

for FILE in ~/.dotfiles/.{gitconfig,inputrc,wgetrc}; do
    sudo ln -sf $FILE ~/
done
unset FILE

for FILE in ~/.dotfiles/.{exports,functions}; do
    sudo ln -sf $FILE ~/.config/
done
unset FILE

# TODO: Configure git name and email

# Remove bloat
sudo rm /etc/apt/apt.conf.d/20snapd.conf
sudo apt autoremove snapd curl

# End cleanup
sudo apt -y full-upgrade
sudo apt -y autoremove
sudo apt clean -y 
rm -rf /var/lib/apt/lists/*